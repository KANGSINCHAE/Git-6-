# 6. 브랜치

<h1>6-1. 새로운 작업</h1>
-	브랜치는 나뭇가지, 지사, 분점 등 줄기하나에서 뻗어온 갈림길을 의미
-	깃에서는 저장공간 하나에서 가상의 또 다른 저장공간을 만드는 것을 의미

<h3>6-1.1 브랜치 작업</h3>
-	새로운 기능을 추가하거나 많은 변경이 예상되면, 폴더를 통째로 복사하고 폴더 이름을 변경하며 작업해왔음
-	커밋은 파일의 수정이력을 관리한다고 하면, 브랜치는 프로젝트를 독립적으로 관리하는데 사용함
-	안정된 코드 상태를 유지하고, 개발중인 작업과 구분하여 처리해야 할 필요가 있음

<h3>6-1.2 깃 브랜치 특징</h3>
-	가상 폴더 : 깃의 브랜치는 작업 폴더를 실제로 복사하지 않고, 가상 폴더로 생성함. 이는 물리적으로 복제된 구조보다 더 유연하게 처리할 수 있음
-	독립적인 동작 : 원본 폴더와 분리하여 독립적인 개발 작업 수행이 가능함. 기존에는 소스코드의 작업 폴더를 별도로 생성하고 물리적으로 복사된 각자의 폴더에서 코드 작업 후 소스코드 2개를 합쳤으나, 브랜치를 활용하면 각 브랜치에서 소스코드를 수정하고, 원본코드에 병합하는 명령만 실행하면 됨
-	빠른 동작 : 다른 VCS들은 브랜치 생성 시 내부파일 전체를 복사하지만, 깃은 다른 도구들에 비해 가볍고, 전환이 빠른 브랜치 기능을 보유하고 있다. 이는 Blob개념을 도입해서 내부를 구조화 했기 때문인데, Blob은 포인트와 유사한 객체이다. 깃은 브랜치 변경 시 포인터를 활용하여 빠른 전환성능을 보여준다.
-	브랜치를 명령을 사용하면 내부적으로 커밋 하나를 생성하여 브랜치에 할당한다. 다른 버전 관리 시스템은 파일 전체 복사를 하지만, 깃은 41바이트를 가지는 해시파일 하나만 만들면됨.


<h1>6-2. 실습 준비</h1>
-	깃은 master 브랜치를 하나 가지고 있고 브랜치는 HEAD 포인터를 가지고 있다.

<h3>6-2.1 저장소 생성 및 초기화</h3>
-	실습 내용 기입

<h3>6-2.2 기본 브랜치</h3>
-	깃은 최소 브랜치가 1개 이상 필요함.
-	저장소를 처음 초기화하면 master 브랜치가 자동으로 생성됨
-	모든 커밋 이력은 브랜치에 기록됨.
-	깃에서는 항상 현재 작업하는 브랜치 위치를 확인하는 것이 중요
-	또한 branch 명령어로 현재 브랜치를 확인할 수 있음

<h1>6-3. 브랜치 생성</h1>
-	브랜치는 공통 커밋을 가리키는 지점임.
-	커밋처럼 SHA1 해시키를 가리킨다. 하지만 이는 기억하기 번거로우므로, 특정 커밋을 가리키는 별칭을 만듬.
-	새 브랜치를 생성하면 포인터만 있는 브랜치가 생성됨.
-	브랜치는 마지막 커밋 위치를 가리키는 역할만 할 뿐, 실제 브랜치가 아님. 실제 브랜치는 실제 커밋이 추가될 때 만들어짐

<h3>6-3.1 브랜치 생성</h3>
-	기본적으로 제공되는 master 브랜치 이외에 사용자가 직접 정의한 사용자 정의 브랜치를 생성하는 것을 의미함
-	브랜치는 또 하나의 개발 분기점을 의미함.
-	브랜치를 생성하려면 아래와 같은 명령어를 사용한다.
-	git branch [Branch name] [Commit ID]
-	브랜치 이름만 입력하면, 현재 HEAD포인터 기준으로 새로운 브랜치 생성, 직접 지정하면 지정한 커밋 ID 기준으로 생성

<h3>6-3.2 브랜치 이름</h3>
-	브랜치 이름은 /를 사용하여 계층적 구조로 만들어 사용이 가능. 규칙은 아래와 같음
-	기호(-)로 시작할 수 없음
-	마침표(.)로 시작할 수 없음
-	연속적인 마침표(..)를 포함할 수 없음
-	빈칸, 공백 문자, 물결(~), 캐럿(^), 물음표(?), 별표(*), 대괄호([]) 등은 포함할 수 없음
-	아스키 제어 문자는 포함할 수 없음
-	주의할 점은 브랜치 이름은 중복해서 사용하지 않아야함.

<h3>6-3.3 소스트리 브랜치</h3>
-	새탭에서 Add 클릭
-	탐색을 눌러 만든 폴더를 찾아 선택 후 추가
-	왼쪽에서 브랜치 탭 확인
-	Master 브랜치 선택
-	마우스 오른쪽 버튼을 눌러 브랜치… 메뉴 선택
-	위쪽 브랜치 생성 버튼 클릭
-	커밋을 선택하여 브랜치 생성하는 것은 지정한 커밋을 기준으로 브랜치를 생성한다는 것
-	커밋 목록에서 브랜치 생성하면 명시된 커밋에 브랜치가 체크되어 있는 것을 확인
-	최종커밋 기준으로 작업사본 부모항목 선택
-	결과 확인

<h1>6-4. 브랜치 확인</h1>
<h3>6-4.1 간단 브랜치 목록</h3>
-	깃 배시에서 브랜치 목록을 확인하려면 git branch 만 단독으로 사용하면 됨
-	별표는 현재 선택된 브랜치를 의미
-	소스트리 목록에서 O 마크 이동 확인
-	깃 배시에서는 *로 표시함.

<h3>6-4.2 브랜치 해시</h3>
-	특정한 커밋의 해시 값을 가리킴 저수준 명령인 rev-parse를 사용하여 현재 브랜치가 어떤 커밋 해시 값을 가리키는지 확인할 수는 있음
-	브랜치의 해시값과 브랜치를 생성한 기준 커밋의 해시 값이 동일함.

<h3>6-4.3 브랜치 세부 사항 확인</h3>
-	Branch 명령어 뒤에 -v 또는 –verbose 옵션을 함께 사용하여 이름, 커밋ID, 커밋 메시지 등을 볼 수 있음.

<h1>6-5. 브랜치 이동</h1>
<h3>6-5.1 체크아웃</h3>
-	호텔에서 퇴실할 때 체크아웃 한다는 말에서 유래함.
-	현재 브랜치를 떠나, 새로운 브랜치로 들어간다는 의미
-	git checkout [브랜치이름]
-	주의점은 깃은 하나의 워킹 디렉터리만 가지고 있고 다른 브랜치에서 작업하려면 브랜치를 변경하여 워킹 디렉터리를 재설정해야 함
-	또한 커밋하지 않은 내용이 없으면, 브랜치를 변경할 수 없음. 이는 6-5.5에서 조금 더 자세히 언급됨


<h3>6-5.2 브랜치 동작 원리</h3>
-	HEAD 정보는 항상 변경된 브랜치의 마지막 커밋을 가리킴. 브랜치가 이동하면 HEAD 포인터도 같이 이동함
-	변경된 브랜치로 새로 작업할 수 있도록 워킹 디렉터리를 변경함. 기존 브랜치의 워킹 디렉터리를 정리해야 함

<h3>6-5.3 소스트리 실습</h3>
-	브랜치 선택 상태에서 마우스 우클릭 후 체크아웃master…를 선택
-	O 마크가 이동함

<h3>6-5.4 이전 브랜치</h3>
-	리눅스에서 대시(-) 기호는 이전 디렉터리를 의미
-	이 대시를 활용하여 쉽게 이전 브랜치로 이동할 수 있음.
-	git checkout -를 활용하면 됨.

<h3>6-5.5 워킹 디렉터리 정리</h3>
-	현재 작업하고 있는 워킹 디렉터리를 정리 하고 넘어가야 함
-	워킹 디렉터리 안에서 작성하는 내용이 존재하고, 커밋하지 않았으면 체크아웃 시 경고가 발생함
-	깃은 향후 충돌을 방지하기 위해서 이러한 제약을 걸어 놓았음

<h1>6-6. 브랜치 공간</h1>
<h3>6-6.1 브랜치 로그</h3>
-	현재까지 작업한 로그 기록을 확인할 때 git log를 쓰지만, 브랜치 흐름도를 쓰려면 --graph를 같이 사용함.  --graph --all 옵션을 사용하여 모든 로그를 출력함
-	브랜치 경로와 작업들이 텍스트 그래프로 출력됨

<h3>6-6.2 브랜치 소스 확인</h3>
-	실습 내용 기입

<h1>6-7. HEAD 포인터</h1>
<h3>6-7.1 마지막 커밋</h3>
-	깃은 마지막 커밋 정보가 매우 중요함. 
-	마지막 커밋 정보를 기반으로 새로운 커밋을 생성하기 때문임 마지막 커밋은 새로운 커밋의 부모 커밋임.
-	마지막 커밋을 가리키는 HEAD 포인터를 부모 커밋으로 대체하여 사용함. 이를 활용하여 빠르게 스냅샷을 생성할 수 있음

<h3>6-7.2 브랜치 HEAD</h3>
-	브랜치를 이동하면 HEAD 포인터도 이동함.
-	실습내용 기입

<h3>6-7.3 소스트리 HEAD</h3>
-	소스트리 에서도 HEAD 포인트 상태를 쉽게 확인할 수 있음
-	각 브랜치의 마지막 위치를 브랜치 아이콘으로 표시

<h3>6-7.4 상대적 위치</h3>
-	깃의 HEAD 포인터는 내부적으로 커밋을 생성하고 브랜치를 관리하는데 매우 유용
-	다양한 명령어를 입력할 때도 기준점으로 두고 사용함
-	캐럿(^)과 물결(~) 기호를 같이 사용함.
-	이전 n개의 위치를 지정하려면 ^나 ~를 여러 개 사용하는 것 보다는 HEAD^n 또는 HEAD~n 과 같이 숫자를 붙이는 것이 좋음

6-7.5 AHEAD, BHEAD
-	원격 저장소와 연동하여 깃을 관리하면 브랜치마다 HEAD가 2개가 있음.
-	AHEAD와 BHEAD는 서로 다른 저장소 간 HEAD 포인터의 위치 차이를 의미함.
-	AHEAD : 서버로 전송되지 않은 로컬 커밋이 있는 것을 의미함.
-	BHEAD : 로컬 저장소로 내려받지 않은 커밋이 있는 것을 의미함.

6-8. 생성과 이동
6-8.1 자동 이동 옵션
-	Branch 생성과 이동을 한번에 처리하는 명령이 존재한다.
-	Git checkout -b를 이용하면 된다.
-	Git checkout -b [브랜치 이름]과 같이 사용한다.

6-8.2 커밋 이동
-	브랜치 이름은 커밋 해시 키와 동일함.
-	브랜치 이름 대신 커밋 해시키를 사용하여 체크아웃 할 수도 있음

6-8.3 HEAD를 활용한 이동
-	HEAD 포인터를 사용하여 체크아웃 할 수도 있음
-	Git checkout HEAD-1과 같이 사용

6-8.4 돌아오기
-	커밋 해시키 또는 HEAD를 사용하여 과거의 커밋으로 체크아웃했으면 다시 현재 시점으로 돌아와야 한다. 간단하게 대시(-)를 활용하면 됨
-	Git checkout -를 사용한다.


6-9. 원격 브랜치
-	로컬 저장소, 원격 저장소는 일종의 저장소임. 분산형 저장소의 특징으로써 다수의 저장소를 만들어 연결할 수 있음.
6-9.1 리모트 브랜치
-	원격 저장소에 생성한 브랜치를 리모트 브랜치라 부름
-	별도 명령을 실행해서 저장소를 동기화해야 함.
-	보통 별칭/브랜치 이름 형태를 가지고 있음

6-9.2 실습 준비
-	실습 내용 기입

6-9.3 브랜치 추적
-	로컬 저장소에서 원격 저장소의 브랜치를 가리키는 것을 브랜치 추적이라고 부름
-	추적 브랜치를 트래킹 브랜치라고 부름.
-	로컬 저장소가 원격 저장소와 연결될 때 원격 브랜치의 트래킹 정보는 자동으로 갱신됨

6-9.4 브랜치 업로드
-	자동으로 등록되지 않고, git remote show 명령어로 등록된 원격 브랜치를 확인할 수 있음
-	리모트 브랜치는 서버 간 통신을 하고 나서 생성됨.
-	동기화 하려면 git push [원격 저장소 별칭] [브랜치 이름] 작업을 해줘야 함
-	실습 내용 기입

6-9.5 이름이 다른 브랜치
-	반드시 원격 브랜치와 로컬 브랜치는 이름이 동일할 필요가 없음.
-	브랜치를 직접 수동으로 지정하여 연결하려면 콜론으로 구분한다.
-	Git push origin 브랜치이름:새로운브랜치 와 같이 사용한다.
6-9.6 업스트림 트래킹
-	업스트림은 브랜치 추적을 다르게 표현한 것
-	로컬 저장소의 브랜치와 원격 저장소의 브랜치는 업로드 할 수 있도록 매칭되어 있음
-	이러한 매칭을 업스트림 트래킹이라고 함
-	이는 원격 브랜치와 로컬 브랜치를 연결해주는 중간 다리 역할을 함
-	Git branch -r 옵션을 사용하면 원격 저장소의 리모트 브랜치 목록을 확인할 수 있음
-	모든 브랜치 정보를 확인하고 싶다면 -a 옵션을 사용
-	트래킹 브랜치는 -vv 옵션을 사용하여 확인함

6-9.7 원격 브랜치 복사
-	원격 저장소의 리모트 브랜치를 이용해서 로컬 저장소에서도 새로운 브랜치를 생성하여 동기화 가능
-	Git checkout -b 새이름 origin/브랜치이름 과 같이 사용함.

6-9.8 업스트림 연결
-	기존에 있는 브랜치를 업스트림으로 직접 설정할 수 있음
-	Git branch -u origin/브랜치이름 과 같이 사용하면 됨
-	-u 옵션은 –set-upstream-to를 의미하고, 기존 브랜치를 특정 원격 브랜치로 추적함.

6-10. 브랜치 전송
6-10.1 브랜치 푸시
-	깃의 푸시 작업은 로컬 저장소의 파일들을 원격 저장소로 전송함. 또한 브랜치 정보와 커밋 까지 모두 전송함.
-	원격 저장소 연결만으로 업스트림이 자동으로 설정되지는 않음
-	--set-upstream을 이용해 직접 설정해주어야 함

6-10.2 브랜치 페치
-	리모트 브랜치가 페치되면 깃은 단수히 원격저장소별칭/브랜치 포인터만 생성하고 자동으로 병합하지는 않음.
-	병합은 merge로 별도로 해야함.
-	병합하지 않고 테스트만 하고 싶으면 원격 브랜치의 포인터를 사용하여 임시 브랜치 생성 및 직접 체크아웃을 하면 됨

6-11. 브랜치 삭제
-	브랜치를 삭제하는 것은 간단함. 하지만 브랜치 내용 및 커밋을 모두 삭제하기에 주의해야 함.
-	현재 자신이 있는 브랜치는 삭제할 수 없음

6-11.1 일반적인 삭제 방법
-	-d 옵션을 사용함.
-	Git branch -d [브랜치이름]
-	스테이지 상태가 깨끗할 때만 삭제 허용

6-11.2 강제 삭제 방법
-	-D 옵션을 사용해야 함.
-	Git branch -D [브랜치이름]

6-11.3 소스트리에서 삭제
-	브랜치 선택 후 우클릭, featuer 삭제를 선택

6-11.4 리모트 브랜치 삭제
-	삭제 명령을 푸시해야 하며 git push origin --delete [리모트브랜치이름] 과 같이 사용해야 함.


